[[time-series]]
== Time Series

MongoDB 5.0 introduced https://docs.mongodb.com/manual/core/timeseries-collections/[Time Series] collections optimized to efficiently store sequences of measurements.
Those collections need to be actively created before inserting any data. This can be done by manually executing the command, defining time series collection options or extracting options from a `@TimeSeries` annotation as shown in the examples below.

.Create a Time Series Collection
====
.Create a Time Series via the MongoDB Driver
[code, java]
----
template.execute(db -> {

    com.mongodb.client.model.CreateCollectionOptions options = new CreateCollectionOptions();
    options.timeSeriesOptions(new TimeSeriesOptions("timestamp"));

    db.createCollection("weather", options);
    return "OK";
});
----

.Create a Time Series Collection with CollectionOptions
[code, java]
----
template.createCollection("weather", CollectionOptions.timeSeries("timestamp"));
----

.Create a Time Series Collection derived from an Annotation
[code, java]
----
@TimeSeries(collection="weather", timeField = "timestamp")
public class Measurement {

    String id;
    Instant timestamp;
    // ...
}

template.createCollection(Measurement.class);
----
====

The snippets above can easily be transferred to the reactive API offering the very same methods.
Just make sure to _subscribe_.

